!function a(E,s,i){function T(t,e){if(!s[t]){if(!E[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(_)return _(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=s[t]={exports:{}};E[t][0].call(n.exports,function(e){return T(E[t][1][e]||e)},n,n.exports,a,E,s,i)}return s[t].exports}for(var _="function"==typeof require&&require,e=0;e<i.length;e++)T(i[e]);return T}({1:[function(e,t,o){"use strict";var r=browser,n=e("../../Share/define.js"),E=e("../../Share/contentScript/contentScript.js");function a(){E.call(this)}((a.prototype=Object.create(E.prototype)).constructor=a).prototype.parent=E.prototype,a.prototype.start=function(){console.log(this.TAG+" start"),r.runtime.onMessage.addListener(this.onMessageHandler.bind(this)),r.runtime.sendMessage({msgId:n.PAGE_EVENT.CONTENT_SCRIPT_GET_INFO,href:window.location.href},this.GetExtInfoCallback.bind(this))},a.prototype.onMessageHandler=function(e,t){try{if(console.log(this.TAG+"onMessageHandler start with id",e.msgId),console.log(this.TAG+" chrome runtime id "+r.runtime.id),console.log(this.TAG+" sender id "+t.id),r.runtime.id===t.id)switch(e.msgId){case n.EXT_INTERNAL_MASSAGING_FOR_POST_TO_CONSOLE:window.postMessage(e.postObject.postData,e.postObject.postDomain);break;case n.EXT_INTERNAL_MASSAGING_FOR_UPDATE_DIV:this.parent.UpdateDiv.call(this,e.divObject);break;case n.EXT_INTERNAL_MASSAGING_FOR_POST_TO_EXTENSION_FRAME:this.extensionFrameConfig.EXTENSION_FRAME_PAGE&&this.lowLocation===this.extensionFrameConfig.EXTENSION_FRAME_PAGE.toLowerCase()&&this.extensionFrameWindow.postMessage(e.postObject.postData,e.postObject.postDomain)}}catch(o){console.error(this.TAG+"[onMessageHandler] onerror: "+o.stack)}},a.prototype.extensionFrameMessageHandler=function(e){console.log(this.TAG+"[extensionFrameMessageHandler] enter"),e.detail?(console.log(this.TAG+"[extensionFrameMessageHandler] relay message: ",e.detail),r.runtime.sendMessage({msgId:n.PAGE_EVENT.RELAY_EXTENSION_FRAME_MESSAGE,msg:e.detail})):console.error(this.TAG+"[extensionFrameMessageHandler] The event from extension frame without data payload")},a.prototype.popoverMessageHandler=function(e){console.log(this.TAG+"[popoverMessageHandler] enter");try{if("string"==typeof e.data){var t=JSON.parse(e.data);switch(t.id){case n.PAGE_EVENT.SAVE_MASTER_PIN:var o=JSON.stringify(t.pin);r.runtime.sendMessage({msgId:t.id,pin:o});break;case n.PAGE_EVENT.OPEN_URL:r.runtime.sendMessage({msgId:t.id,url:t.url});break;case n.PAGE_EVENT.APP_CACHE:r.runtime.sendMessage({msgId:t.id,status:t.status});break;case n.PAGE_EVENT.BHO_IMPORT_FTE:r.runtime.sendMessage({msgId:t.id,action:t.action});break;case n.PAGE_EVENT.RELOAD_POPUP:case n.PAGE_EVENT.CLOSE_POPUP:case n.PAGE_EVENT.RESCAN_TOWER:r.runtime.sendMessage({msgId:t.id});break;case n.PAGE_EVENT.PASSCARD_RENDER_READY:}}}catch(e){console.error(this.TAG+"[popOverMessageHandler] onerror: "+e.stack)}},a.prototype.afterInjectDiv=function(){console.log(this.TAG+"[afterInjectDiv] enter"),!0===this.injectDivForExtensionFrame?r.runtime.sendMessage({msgId:n.PAGE_EVENT.EXTENSION_READY}):window.addEventListener("message",this.popoverMessageHandler.bind(this),!1)},a.prototype.GetExtInfoCallback=function(e){this.parent.GetExtInfoCallback.call(this,e.info)},(new a).start()},{"../../Share/contentScript/contentScript.js":2,"../../Share/define.js":3}],2:[function(e,t,o){"use strict";var n=e("../define.js"),r=e("../utils.js");e("../../Share/global.js");function E(){this.TAG="[CS] ",this.extensionFrameConfig={},this.extensionFrameWindow=null,this.retryRemainCount=5,this.retryInterval=100,this.injectDivData={},this.injectDivForExtensionFrame=!1,this.injectScoutDone=!1,this.lowLocation=window.location.href.toLowerCase()}E.prototype.start=null,E.prototype.extensionFrameMessageHandler=null,E.prototype.popoverMessageHandler=null,E.prototype.afterInjectDiv=null,E.prototype.loadScoutErrorCB=null,E.prototype.injectDiv=function(){console.log(this.TAG+"[injectDiv] enter");var e=document.getElementById(n.GATEWAY_DIV_NAME);if(!e){for(var t in(e=document.createElement("div")).setAttribute("id",n.GATEWAY_DIV_NAME),this.injectDivData)this.injectDivData.hasOwnProperty(t)&&e.setAttribute(t,this.injectDivData[t]);e.addEventListener(n.GATEWAY_DIV_EVENT_ID,this.extensionFrameMessageHandler.bind(this),!1),document.body.appendChild(e),this.afterInjectDiv()}},E.prototype.createScoutScriptElement=function(){console.log(this.TAG+"[createScoutScriptElement] enter");var e=document.createElement("script");return e.type="text/javascript",e.setAttribute("id",n.SCOUT_NAME),e.src=this.extensionFrameConfig.SCRIPT_SRC_WITH_VERSION,e.onerror=function(){this.loadScoutErrorCB&&this.loadScoutErrorCB()}.bind(this),e},E.prototype.injectScript=function(e){if(console.log(this.TAG+"[injectScript] enter"),!1===this.injectScoutDone){this.injectScoutDone=!0;var t=e||this.createScoutScriptElement(),o=document.head||document.documentElement;o.insertBefore(t,o.firstChild)}},E.prototype.PopoverPageHandle=function(e){console.log(this.TAG+"[PopoverPageHandle] enter"),0<e.version.length?(this.injectDivData={baseUrl:e.baseUrl,bhoFirstTime:e.bhoFTE.IMPORT_FIRST_TIME,browserName:e.browserName,dataError:e.dataError,locale:e.locale,version:e.version,mode:e.mode,networkConnected:e.networkConnected,sessionId:e.sessionId,pin:e.pin,activeUrl:e.activeUrl,activePasscardIds:e.activePasscardIds,PbMode:e.PbMode},"PB_Chrome"==this.injectDivData.browserName?(this.injectDivData.browserName="Chrome",this.injectDivData.inpb=1):"PB_Firefox"==this.injectDivData.browserName&&(this.injectDivData.browserName="Firefox",this.injectDivData.inpb=1),window===window.top||"bho"===e.mode?r.onDocumentReady(this.injectDiv.bind(this)):console.warn(this.TAG+"[PopoverPageHandle] Invalid Iframe")):(this.injectDivData={baseUrl:e.baseUrl,browserName:e.browserName,dataError:e.dataError,locale:e.locale,mode:e.mode},r.onDocumentReady(this.injectDiv.bind(this)))},E.prototype.ExpirePageHandle=function(e){console.log(this.TAG+"[ExpirePageHandle] wait for extension frame ready to inject div"),0<e.version.length?(this.injectDivData.baseUrl=e.baseUrl,r.onDocumentReady(this.injectDiv.bind(this))):console.warn(this.TAG+"[ExpirePageHandle] get tower info failed")},E.prototype.DpScriptPageHandle=function(e){console.log(this.TAG+"[DpScriptPageHandle] enter");var t=e.dataError;switch(t){case n.POPOVER_DATA_ERROR.NO_PIN:case n.POPOVER_DATA_ERROR.NO_TOWER:case n.POPOVER_DATA_ERROR.NO_TOWER_PENDING:case n.POPOVER_DATA_ERROR.SIGN_OUT:return void console.warn(this.TAG+"dataError = ",t);case n.POPOVER_DATA_ERROR.NONE:}this.extensionFrameConfig=e.extFrameInfo,console.log(this.TAG+"wait for document ready to inject script"),r.onDocumentReady(this.injectScript.bind(this))},E.prototype.ExtensionFrameHandle=function(e){console.log(this.TAG+"[ExtensionFrameHandle] enter");var t=e.dataError;switch(t){case n.POPOVER_DATA_ERROR.NO_PIN:case n.POPOVER_DATA_ERROR.NO_TOWER:case n.POPOVER_DATA_ERROR.NO_TOWER_PENDING:case n.POPOVER_DATA_ERROR.SIGN_OUT:return void console.warn(this.TAG+"dataError = ",t);case n.POPOVER_DATA_ERROR.NONE:}console.log(this.TAG+"wait for extension frame ready to inject div"),this.extensionFrameConfig=e.extFrameInfo,this.extensionFrameWindow=window,this.injectDivForExtensionFrame=!0,r.onDocumentReady(this.injectDiv.bind(this))},E.prototype.InstallPageHandle=function(e){console.log(this.TAG+"[InstallPageHandle] enter"),window.location.href=e.bhoFTE.EXTENSION_READY_URL},E.prototype.UpdateDiv=function(e){console.log(this.TAG+"[UpdateDiv] enter");var t=document.getElementById(n.GATEWAY_DIV_NAME);if(t)for(var o in e)try{e.hasOwnProperty(o)&&t.getAttribute(o)!=e[o]&&t.setAttribute(o,e[o])}catch(r){console.err(this.TAG+"[UpdateDiv] failed",r)}},E.prototype.GetExtInfoCallback=function(e){if(!0!==e.isInBlockList)if(e.dataError!==n.POPOVER_DATA_ERROR.EXT_NOT_READY){try{if(0===this.lowLocation.indexOf(e.popoverUrl.toLowerCase()))return console.log("content Script: response: ",e),void this.PopoverPageHandle(e)}catch(o){console.warn(this.TAG+"parse error for PopoverPageHandle",o)}try{if(0===this.lowLocation.indexOf(e.extFrameInfo.EXTENSION_FRAME_PAGE.toLowerCase()))return void this.ExtensionFrameHandle(e)}catch(o){console.warn(this.TAG+"parse error for ExtensionFrameHandle",o)}try{if(!0===r.isSameUrlWithoutDomain(window.location.href,e.bhoFTE.EXTENSION_INSTALL_URL))return void this.InstallPageHandle(e)}catch(o){console.warn(this.TAG+"parse error for InstallPageHandle",o)}try{if(0===this.lowLocation.indexOf(e.licenseExpiredUrl.toLowerCase()))return void this.ExpirePageHandle(e)}catch(o){console.warn(this.TAG+"parse error for ExpirePageHandle",o)}try{var t=e.extFrameInfo.DOMAIN.toLowerCase();if(0<t.length)null==new RegExp(t+"*").exec(this.lowLocation)&&"http"===this.lowLocation.slice(0,4)&&this.DpScriptPageHandle(e)}catch(o){console.warn(this.TAG+"parse error for DpScriptPageHandle",o)}}else 0<this.retryRemainCount?(console.log(this.TAG+"extension is not ready yet, retry later"),this.retryRemainCount--,setTimeout(function(){this.start()}.bind(this),this.retryInterval)):console.error(this.TAG+"extension is not ready yet, give up to retry");else console.log(this.TAG+"skip page")},t.exports=E},{"../../Share/global.js":4,"../define.js":3,"../utils.js":5}],3:[function(e,t,o){"use strict";t.exports={NETWORK_STATUS:{CONNECT:1,DISCONNECT:2},TOWER_STATUS:{SIGN_IN:1,SIGN_OUT:2,EXPIRED:3},WS_TOWER_EVENT:{AccountStatus:"AccountStatus",NetworkStatus:"NetworkStatus",hasCreatedMasterpin:"hasCreatedMasterpin",isTowerLocked:"isTowerLocked",logLevel:"logLevel",enableConsole:"enableConsole",enableAjax:"enableAjax",sessionExpiredStatus:"sessionExpiredStatus",accountExpiredStatus:"accountExpiredStatus",updatePasscardStatus:"updatePasscardStatus",injectBlockList:"injectBlockList",LicenseExpiredUrl:"LicenseExpiredUrl"},WS_EVENT:{DISCONNECT:1,NETWORK_CONNECT:2,NETWORK_DISCONNECT:3,ACCOUNT_SIGN_IN:4,ACCOUNT_SIGN_OUT:5,NO_PIN:6,GOT_PIN:7,PIN_LOCK:8,PIN_UNLOCK:9,LOG_SETTING:10,SESSION_EXPIRED:11,ACCOUNT_EXPIRED:12,ACCOUNT_RENEWED:13,BLOCK_LIST_UPDATE:14,PASSCARD_UPDATE:15,LICENSE_EXPIRED_URL_UPDATE:16},PAGE_EVENT:{CONTENT_SCRIPT_GET_INFO:"ContentScriptGetInfo",GET_SCOUT_SCRIPT_CONTENT:"GetScoutScriptContent",SAVE_MASTER_PIN:"SaveMasterPin",EXTENSION_READY:"ExtensionReady",RELAY_EXTENSION_FRAME_MESSAGE:"RelayExtensionFrameMessage",GET_INIT_DATA:"GetInitData",APP_CACHE:"appcache",BHO_IMPORT_FTE:"BhoImportFirstTime",RELOAD_POPUP:"ReloadPopover",CLOSE_POPUP:"ClosePopover",RESCAN_TOWER:"RescanTower",POPUP_UNLOAD:"PopoverUnloading",PASSCARD_RENDER_READY:"PasscardRenderReady",GET_POPOVER_INIT_DATA:"GetPopOverInitData",OPEN_URL:"openURL",DISABLE_REPLAY_EVENT:"disableReplayEvent",ENABLE_REPLAY_EVENT:"enableReplayEvent",NETWORK_CONNECTED:"networkConnected",ACTIVE_URL:"activeUrl"},EXT_STATE:{INIT:"[1]Init",START:"[2]Start",SCAN_PORT:"[3]ScanPort",GOT_PORT:"[4]GotPort",SIGN_IN:"[5]SignIn",SIGN_OUT:"[6]SignOut",NO_PIN:"[7]NoPin",PIN_LOCK:"[8]PinLock",EXPIRED:"[9]Expired",NO_RES:"[10]NoRes",NO_TOWER:"[11]NoTower",NO_TOWER_CACHE:"[12]NoTowerCache",FORCE_SCAN:"[13]ForceScan",FORCE_NO_TOWER:"[14]ForceNoTower"},POPOVER_DATA_ERROR:{NONE:0,SIGN_OUT:1,NO_PIN:2,NO_TOWER:3,NO_TOWER_PENDING:4,EXPIRED:5,EXT_NOT_READY:100},STORAGE:{HTTP_PORT:"https",APP_CACHE_READY:"isAppCacheReady",IMPORT_FIRST_TIME:"isImported",POPOVER_URL:"popoverUrl",SAFARI_POPOVER_URL:"safariPopoverUrl",SCOUT_VERSION:"scoutVersion",LOCALE:"locale",UBM:"ubm"},SCAN_SETTING:{START:49153,END:49202,SCAN_INTERVAL:2200,SCAN_TIMEOUT:2800,SCAN_MAX_ROUND:1,OFFLINE_RESCAN_INTERVAL:3e4},LOG_INIT_SETTING:{LEVEL:"log",CONSOLE:!0,AJAX:!1,BATCH_SIZE:50},BROWSER_NAME:{SECURE_BROWSER:"SecureBrowser",CHROME:"Chrome",SAFARI:"Safari",FIREFOX:"Firefox",EDGE:"Edge"},PAGE_MODE:{CONSOLE:"console",BHO:"bho"},TOWER_URL:"https://localhost",TOWER_INFO_API:"api/getTowerInfo",TOWER_LOG_API:"api/debugLog",TOWER_PASSCARD_IDS_BY_URL_API:"api/passcardIdsByUrl",DEFAULT_POPOVER_PAGE:"https://pwm.trendmicro.com/3.8/extensionPopOver/bho_index.html",DEFAULT_SAFARI_POPOVER_PAGE:"https://pwm.trendmicro.com/extensionPopOver/bho_index_%BUILD_STAGE%.html",DEFAULT_LOCALE:"en-US",DEFAULT_IMPORT_FIRST_TIME:"none",GATEWAY_DIV_NAME:"gatewayDiv",GATEWAY_DIV_EVENT_ID:"message",EXTENSION_FRAME_ID:"extensionFrame",SCOUT_NAME:"pwm_scout",EXTENSION_FRAME_POST_TYPE_INIT_DATA:"InitData",EXTENSION_FRAME_POST_TYPE_EXTENSION_READY:"ExtensionReady",POPOVER_POST_TYPE_INIT_DATA:"PopOverInitData",EXT_INTERNAL_MASSAGING_COMMON:"extensionMessagingCommon",EXT_INTERNAL_MASSAGING_FOR_POST_TO_EXTENSION_FRAME:"extensionMessagingForPostingToExtensionFrame",EXT_INTERNAL_MASSAGING_FOR_POST_TO_CONSOLE:"extensionMessagingForPostingToConsole",EXT_INTERNAL_MASSAGING_FOR_UPDATE_DIV:"extensionMessagingForUpdateDiv",CONFIG:{FIREFOX:{PERSIST_POPOVER:!0,ICON_BADGE:!1},EDGE:{ICON_BADGE:!1}}}},{}],4:[function(e,t,o){"use strict";var r=e("./define.js"),n={storage:null,browserName:"",browserVersion:"",extVersion:"",extState:r.EXT_STATE.INIT,TOWER_PORT:-1,LOG_LEVEL:r.LOG_INIT_SETTING.LEVEL,LOG_CONSOLE:r.LOG_INIT_SETTING.CONSOLE,LOG_AJAX:r.LOG_INIT_SETTING.AJAX,TOWER_INFO:{TOWER_VERSION:"",TOWER_LOCALE:r.DEFAULT_LOCALE},POPOVER:{PAGE:r.DEFAULT_POPOVER_PAGE,PRELOAD_PAGE:null,SAFARI_PAGE:r.DEFAULT_SAFARI_POPOVER_PAGE,SAFARI_GUID:null},BROWSER_STATUS:"",TOWER_STATUS:{ACCOUNT_STATUS:r.TOWER_STATUS.SIGN_OUT,NETWORK_STATUS:r.NETWORK_STATUS.DISCONNECT,NO_PIN:!0,PIN_LOCK:!1,NO_TOWER:!1},FTE:{EXTENSION_READY_URL:"",EXTENSION_INSTALL_URL:"",IMPORT_FIRST_TIME:r.DEFAULT_IMPORT_FIRST_TIME},EXTENSION_FRAME:{DOMAIN:"",SCRIPT_SRC:"",SCRIPT_SRC_WITH_VERSION:"",EXTENSION_FRAME_PAGE:"",INJECT_BLOCK_ARRAY:[]},LICENSE_EXPIRED_URL:"",UBM:0,APP_CACHE_READY:!1,ACTIVE_INFO:{URL:"",ENCODED_URL:"",PASSCARD_IDS:[]},PbMode:!1},E={data:n,InitWithStorage:function(e){e&&(n.storage=e),n.storage&&(n.storage[r.STORAGE.HTTP_PORT]&&(n.TOWER_PORT=Number(n.storage[r.STORAGE.HTTP_PORT])),n.storage[r.STORAGE.LOCALE]&&(n.TOWER_INFO.TOWER_LOCALE=n.storage[r.STORAGE.LOCALE]),n.storage[r.STORAGE.POPOVER_URL]&&(n.POPOVER.PAGE=n.storage[r.STORAGE.POPOVER_URL]),n.storage[r.STORAGE.SAFARI_POPOVER_URL]&&(n.POPOVER.SAFARI_PAGE=n.storage[r.STORAGE.SAFARI_POPOVER_URL]),n.storage[r.STORAGE.IMPORT_FIRST_TIME]&&(n.FTE.IMPORT_FIRST_TIME=n.storage[r.STORAGE.IMPORT_FIRST_TIME]),n.storage[r.STORAGE.APP_CACHE_READY]&&(n.APP_CACHE_READY=n.storage[r.STORAGE.APP_CACHE_READY]))},SetBrowserName:function(e){n.browserName=e},GetBrowserName:function(){return n.browserName},SetBrowserVersion:function(e){n.browserVersion=e},GetBrowserVersion:function(){return n.browserVersion},SetExtVersion:function(e){n.extVersion=e},GetExtVersion:function(){return n.extVersion},SetExtState:function(e){n.extState=e},GetExtState:function(){return n.extState},isInPBChrome:function(){return"PB_Chrome"==n.browserName},isInPBFirefox:function(){return"PB_Firefox"==n.browserName},TowerCurrentHTTPPort:function(){return n.TOWER_PORT},SetTowerHTTPPort:function(e){n.TOWER_PORT=e,n.storage&&(n.storage[r.STORAGE.HTTP_PORT]=n.TOWER_PORT)},GetTowerVersion:function(){return n.TOWER_INFO.TOWER_VERSION},GetTowerLocale:function(){return n.TOWER_INFO.TOWER_LOCALE},SetTowerInfo:function(e){e.hasOwnProperty("version")&&(n.TOWER_INFO.TOWER_VERSION=e.version),e.hasOwnProperty("locale")&&(n.TOWER_INFO.TOWER_LOCALE=e.locale,n.storage&&(n.storage[r.STORAGE.LOCALE]=n.TOWER_INFO.TOWER_LOCALE))},GetPopupPageConfig:function(){return n.POPOVER},SetPopupPage:function(e){e.hasOwnProperty("PAGE")&&(n.POPOVER.PAGE=e.PAGE,n.storage&&(n.POPOVER.PAGE!=n.storage[r.STORAGE.POPOVER_URL]&&this.SetAppCacheReady(!1),n.storage[r.STORAGE.POPOVER_URL]=e.PAGE)),e.hasOwnProperty("PRELOAD_PAGE")&&(n.POPOVER.PRELOAD_PAGE=e.PRELOAD_PAGE),e.hasOwnProperty("SAFARI_PAGE")&&(n.POPOVER.SAFARI_PAGE=e.SAFARI_PAGE,n.storage&&(n.storage[r.STORAGE.SAFARI_POPOVER_URL]=e.SAFARI_PAGE)),e.hasOwnProperty("SAFARI_GUID")&&(n.POPOVER.SAFARI_GUID=e.SAFARI_GUID)},SetBrowserStatus:function(e){n.BROWSER_STATUS=e},GetBrowserStatus:function(){return n.BROWSER_STATUS},GetTowerStatus:function(){return n.TOWER_STATUS},SetTowerStatus:function(e){e.hasOwnProperty("account_status")&&(n.TOWER_STATUS.ACCOUNT_STATUS=e.account_status,n.TOWER_STATUS.ACCOUNT_STATUS===r.TOWER_STATUS.SIGN_OUT&&(n.TOWER_STATUS.NO_PIN=!1,n.TOWER_STATUS.PIN_LOCK=!1)),e.hasOwnProperty("accountExpired")&&!0===e.accountExpired&&n.TOWER_STATUS.ACCOUNT_STATUS===r.TOWER_STATUS.SIGN_IN&&(n.TOWER_STATUS.ACCOUNT_STATUS=r.TOWER_STATUS.EXPIRED),e.hasOwnProperty("networkConnected")&&(n.TOWER_STATUS.NETWORK_STATUS=e.networkConnected),e.hasOwnProperty("hasCreatedMasterpin")&&(n.TOWER_STATUS.NO_PIN=n.TOWER_STATUS.ACCOUNT_STATUS!==r.TOWER_STATUS.SIGN_OUT&&!1===e.hasCreatedMasterpin),e.hasOwnProperty("isTowerLocked")&&(n.TOWER_STATUS.PIN_LOCK=n.TOWER_STATUS.ACCOUNT_STATUS===r.TOWER_STATUS.SIGN_IN&&e.isTowerLocked,!0===n.TOWER_STATUS.PIN_LOCK&&(n.TOWER_STATUS.NO_PIN=!1)),e.hasOwnProperty("NO_TOWER")&&(n.TOWER_STATUS.NO_TOWER=e.NO_TOWER,!0===n.TOWER_STATUS.NO_TOWER&&(n.TOWER_STATUS.ACCOUNT_STATUS=r.TOWER_STATUS.SIGN_OUT,n.TOWER_STATUS.NETWORK_STATUS=r.NETWORK_STATUS.DISCONNECT,n.TOWER_STATUS.NO_PIN=!0,n.TOWER_STATUS.PIN_LOCK=!1))},GetFTE:function(){return n.FTE},SetFTE:function(e){switch(n.browserName){case r.BROWSER_NAME.CHROME:e.hasOwnProperty("ExtChromeReadyUrl")&&(n.FTE.EXTENSION_READY_URL=e.ExtChromeReadyUrl),e.hasOwnProperty("ExtChromeInstallUrl")&&(n.FTE.EXTENSION_INSTALL_URL=e.ExtChromeInstallUrl);break;case r.BROWSER_NAME.SAFARI:e.hasOwnProperty("ExtSafariReadyUrl")&&(n.FTE.EXTENSION_READY_URL=e.ExtSafariReadyUrl),e.hasOwnProperty("ExtSafariInstallUrl")&&(n.FTE.EXTENSION_INSTALL_URL=e.ExtSafariInstallUrl);break;case r.BROWSER_NAME.FIREFOX:e.hasOwnProperty("ExtFirefoxReadyUrl")&&(n.FTE.EXTENSION_READY_URL=e.ExtFirefoxReadyUrl),e.hasOwnProperty("ExtFirefoxInstallUrl")&&(n.FTE.EXTENSION_INSTALL_URL=e.ExtFirefoxInstallUrl);break;case r.BROWSER_NAME.EDGE:e.hasOwnProperty("ExtEdgeReadyUrl")&&(n.FTE.EXTENSION_READY_URL=e.ExtEdgeReadyUrl),e.hasOwnProperty("ExtEdgeInstallUrl")&&(n.FTE.EXTENSION_INSTALL_URL=e.ExtEdgeInstallUrl)}if(e.hasOwnProperty("IMPORT_FIRST_TIME")){var t=e.IMPORT_FIRST_TIME;"string"==typeof t&&0<t.length&&(n.FTE.IMPORT_FIRST_TIME=t,n.storage&&(n.storage[r.STORAGE.IMPORT_FIRST_TIME]=t))}},GetLogLevel:function(){return n.LOG_LEVEL},GetLogConsole:function(){return n.LOG_CONSOLE},GetLogAjax:function(){return n.LOG_AJAX},SetLogSetting:function(e){if(e.hasOwnProperty("LogConsole")){var t=e.LogConsole;n.LOG_CONSOLE="true"===t||1==t}if(e.hasOwnProperty("LogAjax")){var o=e.LogAjax;n.LOG_AJAX="true"===o||1==o}if(e.hasOwnProperty("LogLevel")){var r=e.LogLevel;if("string"==typeof r)switch(r.toLowerCase()){case"off":n.LOG_LEVEL="off";break;case"fatal":case"error":n.LOG_LEVEL="error";break;case"warn":n.LOG_LEVEL="warn";break;case"info":n.LOG_LEVEL="info";break;case"all":case"trace":case"debug":case"log":n.LOG_LEVEL="log";break;default:n.LOG_LEVEL="off"}}},GetExtensionFrame:function(){return n.EXTENSION_FRAME},SetExtensionFrame:function(e){if(e.hasOwnProperty("DOMAIN")&&(n.EXTENSION_FRAME.DOMAIN=e.DOMAIN),e.hasOwnProperty("SCOUT")&&(n.EXTENSION_FRAME.SCRIPT_SRC=e.SCOUT,n.storage&&(!1===n.storage.hasOwnProperty(r.STORAGE.SCOUT_VERSION)&&(n.storage[r.STORAGE.SCOUT_VERSION]=(new Date).getTime()),n.EXTENSION_FRAME.SCRIPT_SRC_WITH_VERSION=n.EXTENSION_FRAME.SCRIPT_SRC+"?version="+n.storage[r.STORAGE.SCOUT_VERSION])),e.hasOwnProperty("EXT_FRAME")&&(n.EXTENSION_FRAME.EXTENSION_FRAME_PAGE=e.EXT_FRAME),e.hasOwnProperty("INJECT_BLOCK_LIST")&&(n.EXTENSION_FRAME.INJECT_BLOCK_ARRAY=e.INJECT_BLOCK_LIST),e.hasOwnProperty("SCOUT_VERSION")){var t=e.SCOUT_VERSION;n.EXTENSION_FRAME.SCRIPT_SRC&&(n.EXTENSION_FRAME.SCRIPT_SRC_WITH_VERSION=n.EXTENSION_FRAME.SCRIPT_SRC+"?version="+t),n.storage&&(n.storage[r.STORAGE.SCOUT_VERSION]=t)}},GetLicenseExpiredUrl:function(){return n.LICENSE_EXPIRED_URL},SetLicenseExpiredUrl:function(e){e.hasOwnProperty("LicenseExpiredUrl")&&(n.LICENSE_EXPIRED_URL=e.LicenseExpiredUrl)},GetUBM:function(){return n.UBM},SetMachineSettings:function(e){e.hasOwnProperty("provide_anonymous_feedback")&&(n.UBM=e.provide_anonymous_feedback,n.storage&&(n.storage[r.STORAGE.UBM]=n.UBM))},SetPbMode:function(e){e.hasOwnProperty("PbMode")&&(n.PbMode=e.PbMode)},GetPbMode:function(e){return n.PbMode},SetAllInOneTowerInfo:function(e){this.SetTowerInfo(e),this.SetTowerStatus(e),this.SetLogSetting(e),this.SetFTE(e),this.SetPopupPage(e),this.SetExtensionFrame(e),this.SetLicenseExpiredUrl(e),this.SetMachineSettings(e),this.SetPbMode(e)},SetAppCacheReady:function(e){n.APP_CACHE_READY=e,n.storage&&(n.storage[r.STORAGE.APP_CACHE_READY]=e)},GetAppCacheReady:function(){return n.APP_CACHE_READY},SetActiveInfo:function(e){e.hasOwnProperty("URL")&&(n.ACTIVE_INFO.URL=e.URL),e.hasOwnProperty("ENCODED_URL")&&(n.ACTIVE_INFO.ENCODED_URL=e.ENCODED_URL),e.hasOwnProperty("PASSCARD_IDS")&&(n.ACTIVE_INFO.PASSCARD_IDS=e.PASSCARD_IDS)},GetActiveInfo:function(){return n.ACTIVE_INFO},GetSupportedLocale:function(e){switch(e.toUpperCase()){case"JA":case"JP":case"JA-JP":case"JA-JP-MAC":return"JA-JP";case"EN":case"EN-US":return"EN-US";case"ZH-TW":case"ZH-HK":return"ZH-TW";case"ES":case"ES-ES":return"ES-ES";case"FR":case"FR-FR":return"FR-FR";case"DE":case"DE-DE":return"DE-DE";default:return n.TOWER_INFO.TOWER_LOCALE}}};"object"==typeof window&&(window.GlobalVariable=E),t.exports=E},{"./define.js":3}],5:[function(e,t,o){"use strict";var E={onDocumentReadyCallback:undefined,onDocumentReady:function(e,t){if("function"==typeof e)if(E.onDocumentReadyCallback=e,!0===n()){var o=E.onDocumentReadyCallback;E.onDocumentReadyCallback=null,o()}else{var r=function(){if(null!=E.onDocumentReadyCallback&&!0===n()){document.removeEventListener("readystatechange",r);var e=E.onDocumentReadyCallback;E.onDocumentReadyCallback=null,e()}};window.document.addEventListener("readystatechange",r)}function n(){var e=window.document.readyState;return t?e===t:"interactive"===e||"complete"===e}},getFullDomainFromUrl:function(e){var t=null;if("string"==typeof e&&(0===e.indexOf("http://")||0===e.indexOf("https://")))try{t=(t=e.replace(/^https?:\/\//i,"")).split(/\/+/g)[0].split(/:/g)[0]}catch(o){t=null}return t},isSameUrlWithoutDomain:function(e,t){try{var o=this.getFullDomainFromUrl(e),r=this.getFullDomainFromUrl(t);if(o&&r){var n=e.replace(o,"Pwm35XxXPwm35"),E=t.replace(r,"Pwm35XxXPwm35"),a=n.split("?")[0],s=E.split("?")[0];return 0<a.length&&a===s}}catch(i){}return!1}};t.exports=E},{}]},{},[1]);